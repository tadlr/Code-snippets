{"version":3,"file":"ajax-plugin-reload.min.js","sources":["ajax-plugin-reload.js"],"sourcesContent":["jQuery(document).ready(function ($) {\r\n  function loadScripts() {\r\n    console.log('loadScripts function called');\r\n    // Hubspot loading forms script and load forms scripts\r\n    if ($('#hubspot_load_forms').length == 0) {\r\n      var scriptFormsLoad = document.createElement('script');\r\n      scriptFormsLoad.id = 'hubspot_load_forms';\r\n      scriptFormsLoad.src = 'https://js.hsforms.net/forms/embed/v2.js';\r\n      document.head.append(scriptFormsLoad);\r\n      console.log('hubspot load forms script added');\r\n    }\r\n\r\n    // Hotjar script\r\n    if ($('#hotjar_reloaded').length == 0) {\r\n      var hotjarScript = document.createElement('script');\r\n      hotjarScript.id = 'hotjar_reloaded';\r\n      hotjarScript.async = true;\r\n      hotjarScript.innerHTML =\r\n        \"(function(h, o, t, j, a, r) {h.hj = h.hj || function() {(h.hj.q = h.hj.q || []).push(arguments)};h._hjSettings = {hjid: 3863711,hjsv: 6};a = o.getElementsByTagName('head')[0];r = o.createElement('script');r.async = 1;r.src = t + h._hjSettings.hjid + j + h._hjSettings.hjsv;a.appendChild(r);})(window, document, 'https://static.hotjar.com/c/hotjar-', '.js?sv=');\";\r\n      document.head.append(hotjarScript);\r\n      console.log('hotjar script added');\r\n    }\r\n\r\n    // Google Tag Manager script\r\n    if ($('#gtm_reloaded').length == 0) {\r\n      var gtmScript = document.createElement('script');\r\n      gtmScript.id = 'gtm_reloaded';\r\n      gtmScript.async = true;\r\n      gtmScript.innerHTML =\r\n        \"(function(w, d, s, l, i) {w[l] = w[l] || [];w[l].push({'gtm.start': new Date().getTime(),event: 'gtm.js'});var f = d.getElementsByTagName(s)[0],j = d.createElement(s),dl = l != 'dataLayer' ? '&l=' + l : '';j.async = true;j.src = 'https://www.googletagmanager.com/gtm.js?id=' + i + dl;f.parentNode.insertBefore(j, f);})(window, document, 'script', 'dataLayer', 'G-TQK8B653YC');\";\r\n      document.head.append(gtmScript);\r\n      console.log('GTM script added - G-TQK8B653YC');\r\n    }\r\n\r\n    if ($('#gtm2_reloaded').length == 0) {\r\n      var gtmScript = document.createElement('script');\r\n      gtmScript.id = 'gtm2_reloaded';\r\n      gtmScript.async = true;\r\n      gtmScript.innerHTML =\r\n        \"(function(w, d, s, l, i) {w[l] = w[l] || [];w[l].push({'gtm.start': new Date().getTime(),event: 'gtm.js'});var f = d.getElementsByTagName(s)[0],j = d.createElement(s),dl = l != 'dataLayer' ? '&l=' + l : '';j.async = true;j.src = 'https://www.googletagmanager.com/gtm.js?id=' + i + dl;f.parentNode.insertBefore(j, f);})(window, document, 'script', 'dataLayer', 'GTM-WVQLG62');\";\r\n      document.head.append(gtmScript);\r\n      console.log('GTM script added - GTM-WVQLG62');\r\n    }\r\n\r\n    // Google Tag script\r\n    if ($('#gtag_reloaded').length == 0) {\r\n      var gtagScript = document.createElement('script');\r\n      gtagScript.id = 'gtag_reloaded';\r\n      gtagScript.async = true;\r\n      gtagScript.src =\r\n        'https://www.googletagmanager.com/gtag/js?id=G-TQK8B653YC\"';\r\n      document.body.prepend(gtagScript);\r\n      console.log('Google Tag script added - G-TQK8B653YC\"');\r\n    }\r\n  }\r\n\r\n  var ensSaveCheck = setInterval(function () {\r\n    if ($('#ensSave').length) {\r\n      console.log('ensSave exists!');\r\n      clearInterval(ensSaveCheck);\r\n\r\n      $('#ensSave').on('click', function () {\r\n        console.log('custom settings saved');\r\n\r\n        loadScripts();\r\n\r\n        var checkScriptFormsLoad = setInterval(function () {\r\n          if ($('script#hubspot_load_forms').length) {\r\n            console.log('hubspot script loaded');\r\n            clearInterval(checkScriptFormsLoad);\r\n\r\n            $('script').each(function (index) {\r\n              if ($(this).html().indexOf('hbspt.forms.create') != -1) {\r\n                var scriptForm = document.createElement('script');\r\n                scriptForm.innerHTML = $(this).html();\r\n                scriptForm.id = 'reloaded_script_' + index;\r\n                $(this).parent().append(scriptForm);\r\n                if ($('head').find('.hbspt-form').length) {\r\n                  $('head').find('.hbspt-form').appendTo($(this).parent());\r\n                  console.log('form inserted');\r\n                }\r\n              }\r\n            });\r\n          }\r\n        }, 100);\r\n\r\n        // Trigger plugin reload\r\n        $.ajax({\r\n          url: 'https://wordpress-dev-appsvc.azurewebsites.net/wp-content/themes/custom_theme/classes/sm-plugin-reload.php',\r\n          type: 'post',\r\n          success: function (response) {\r\n            console.log(response);\r\n          },\r\n          error: function (response) {\r\n            console.log(response);\r\n          },\r\n        });\r\n      });\r\n    }\r\n  }, 100);\r\n\r\n  var checkAcceptAll = setInterval(function () {\r\n    if ($('#ensModalAcceptAll').length) {\r\n      console.log('ensModalAcceptAll exists!');\r\n      clearInterval(checkAcceptAll);\r\n\r\n      $('#ensModalAcceptAll').on('click', function () {\r\n        console.log('all settings saved');\r\n\r\n        loadScripts();\r\n\r\n        var checkScriptFormsLoad = setInterval(function () {\r\n          if ($('script#hubspot_load_forms').length) {\r\n            console.log('hubspot script loaded');\r\n            clearInterval(checkScriptFormsLoad);\r\n\r\n            $('script').each(function (index) {\r\n              if ($(this).html().indexOf('hbspt.forms.create') != -1) {\r\n                var scriptForm = document.createElement('script');\r\n                scriptForm.innerHTML = $(this).html();\r\n                scriptForm.id = 'reloaded_script_' + index;\r\n                $(this).parent().append(scriptForm);\r\n                if ($('head').find('.hbspt-form').length) {\r\n                  $('head').find('.hbspt-form').appendTo($(this).parent());\r\n                  console.log('form inserted');\r\n                }\r\n              }\r\n            });\r\n          }\r\n        }, 100);\r\n\r\n        // Trigger plugin reload\r\n        $.ajax({\r\n          url: 'https://wordpress-dev-appsvc.azurewebsites.net/wp-content/themes/custom_theme/classes/sm-plugin-reload.php',\r\n          type: 'post',\r\n          success: function (response) {\r\n            console.log(response);\r\n          },\r\n          error: function (response) {\r\n            console.log(response);\r\n          },\r\n        });\r\n      });\r\n    }\r\n  }, 100);\r\n});\r\n"],"names":["jQuery","document","ready","$","loadScripts","gtmScript","gtagScript","console","log","length","scriptFormsLoad","createElement","id","src","head","append","hotjarScript","async","innerHTML","body","prepend","ensSaveCheck","setInterval","clearInterval","on","checkScriptFormsLoad","each","index","scriptForm","this","html","indexOf","parent","find","appendTo","ajax","url","type","success","response","error","checkAcceptAll"],"mappings":"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"}