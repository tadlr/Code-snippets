"use strict";function createHomepageGoogleMap(e,a,t){function o(){function o(e){var a=new google.maps.LatLng(e.coords.latitude,e.coords.longitude);s.setCenter(a),s.setZoom(14);var t=document.createElement("DIV");t.innerHTML='<div class="map-marker"><div class="icon"></div></div>';new RichMarker({position:a,map:s,draggable:!1,content:t,flat:!0}).content.className="marker-loaded";(new google.maps.Geocoder).geocode({latLng:a},function(e,a){if(a==google.maps.GeocoderStatus.OK){var t=e[0].geometry.location.lat(),o=e[0].geometry.location.lng();e[0].address_components[0].long_name,new google.maps.LatLng(t,o);$("#location").val(e[0].formatted_address)}})}for(var n={zoom:4,center:new google.maps.LatLng(e,a),disableDefaultUI:!1,scrollwheel:!1,styles:mapStyles,mapTypeControlOptions:{style:google.maps.MapTypeControlStyle.HORIZONTAL_BAR,position:google.maps.ControlPosition.BOTTOM_CENTER},panControl:!1,zoomControl:!0,zoomControlOptions:{style:google.maps.ZoomControlStyle.LARGE,position:google.maps.ControlPosition.RIGHT_TOP}},i=document.getElementById("map"),s=new google.maps.Map(i,n),l=[],r=0,d=!1,c=!1,m=0;m<t.data.length;m++){if(t.data[m].color)var g=t.data[m].color;else g="";var p=document.createElement("DIV");1==t.data[m].featured?p.innerHTML='<div class="map-marker featured'+g+'"><div class="icon"><img src="'+t.data[m].type_icon+'"></div></div>':p.innerHTML='<div class="map-marker '+t.data[m].color+'"><div class="icon">\x3c!--<img src="'+t.data[m].type_icon+'">--\x3e<i class="'+t.data[m].MapIcon+' MapIcon"> </i></div></div>';var u=new RichMarker({position:new google.maps.LatLng(t.data[m].latitude,t.data[m].longitude),map:s,draggable:!1,content:p,flat:!0});l.push(u);var f=document.createElement("div"),y={content:f,disableAutoPan:!1,pixelOffset:new google.maps.Size(-18,-42),zIndex:null,alignBottom:!0,boxClass:"infobox",enableEventPropagation:!0,closeBoxMargin:"0px 0px -30px 0px",closeBoxURL:"/wp-content/themes/genesis-sample/assets/img/close.png",infoBoxClearance:new google.maps.Size(1,1)},v=t.data[m].category;f.innerHTML=drawInfobox(v,f,t,m),l[m].infobox=new InfoBox(y),google.maps.event.addListener(u,"click",function(e,a){return function(){if(google.maps.event.addListener(s,"click",function(e){c=l[a]}),(d=l[a])!=c){for(var e=0;e<l.length;e++)l[e].content.className="marker-loaded",l[e].infobox.close();l[a].infobox.open(s,this),l[a].infobox.setOptions({boxClass:"fade-in-marker"}),l[a].content.className="marker-active marker-loaded",r=1}}}(0,m)),google.maps.event.addListener(l[m].infobox,"closeclick",function(e,a){return function(){d=0,l[a].content.className="marker-loaded",l[a].infobox.setOptions({boxClass:"fade-out-marker"})}}(0,m))}google.maps.event.addListener(s,"click",function(e){0!=d&&0!=c&&(1==r?(d.infobox.open(s),d.infobox.setOptions({boxClass:"fade-in-marker"}),d.content.className="marker-active marker-loaded"):(r=0,d.infobox.setOptions({boxClass:"fade-out-marker"}),d.content.className="marker-loaded",setTimeout(function(){d.infobox.close()},350)),r=0),0!=d&&google.maps.event.addListener(d,"click",function(e){r=1}),r=0}),google.maps.event.addListener(s,"idle",function(){for(var e=[],a=0;a<t.data.length;a++)s.getBounds().contains(l[a].getPosition())?(e.push(l[a]),$.each(e,function(a){setTimeout(function(){s.getBounds().contains(e[a].getPosition())&&(e[a].content.className||(e[a].setMap(s),e[a].content.className+="bounce-animation marker-loaded",markerCluster.repaint()))},50*a)})):(l[a].content.className="",l[a].setMap(null));var o=[];$.each(t.data,function(e){if(s.getBounds().contains(new google.maps.LatLng(t.data[e].latitude,t.data[e].longitude))){var a=t.data[e].category;pushItemsToArray(t,e,a,o)}}),$(".items-list .results").html(o),$.each(t.data,function(e){s.getBounds().contains(new google.maps.LatLng(t.data[e].latitude,t.data[e].longitude))&&function(e,a){var o=new Image,n=$(".results li #"+t.data[a].id+" .image");o.src=e,o.complete?$(".results").each(function(){n.removeClass("loading"),n.addClass("loaded")}):($(".results").each(function(){$(".results li #"+t.data[a].id+" .image").addClass("loading")}),$(o).load(function(){n.removeClass("loading"),n.addClass("loaded")}))}(t.data[e].gallery[0],e)}),rating(".results .item");$(".results .item").hover(function(){l[$(this).attr("id")-1].content.className="marker-active marker-loaded"},function(){l[$(this).attr("id")-1].content.className="marker-loaded"})}),redrawMap("google",s),$(".geolocation").on("click",function(){navigator.geolocation?navigator.geolocation.getCurrentPosition(o):console.log("Geo Location is not supported")});var h=document.getElementById("location"),b=new google.maps.places.Autocomplete(h,{types:["geocode"]});b.bindTo("bounds",s),google.maps.event.addListener(b,"place_changed",function(){var e=b.getPlace();if(e.geometry){e.geometry.viewport?(s.fitBounds(e.geometry.viewport),s.setZoom(12)):(s.setCenter(e.geometry.location),s.setZoom(12));e.address_components&&[e.address_components[0]&&e.address_components[0].short_name||"",e.address_components[1]&&e.address_components[1].short_name||"",e.address_components[2]&&e.address_components[2].short_name||""].join(" ")}})}$.get(urlCompleta+"assets/external/_infobox.js",function(){o()})}function itemDetailMap(e){var a={zoom:14,center:new google.maps.LatLng(e.latitude,e.longitude),disableDefaultUI:!0,scrollwheel:!1,styles:mapStyles,panControl:!1,zoomControl:!1,draggable:!0},t=document.getElementById("map-detail"),o=new google.maps.Map(t,a);if(e.type_icon)var n='<img src="'+e.type_icon+'">';else n="";var i=document.createElement("DIV");i.innerHTML='<div class="map-marker"><div class="icon">'+n+"</div></div>";new RichMarker({position:new google.maps.LatLng(e.latitude,e.longitude),map:o,draggable:!1,content:i,flat:!0}).content.className="marker-loaded"}function simpleMap(e,a,t){var o={zoom:14,center:new google.maps.LatLng(e,a),disableDefaultUI:!0,scrollwheel:!1,styles:mapStyles,panControl:!1,zoomControl:!0,draggable:!0},n=document.getElementById("map-simple"),i=new google.maps.Map(n,o),s=document.createElement("DIV");s.innerHTML='<div class="map-markerw"><div class="iconw"><i class="icon-map-marker MapMark"></i></div></div>';new RichMarker({position:new google.maps.LatLng(e,a),map:i,draggable:t,content:s,flat:!0}).content.className="marker-loaded"}function pushItemsToArray(e,a,t,o){o.push('<li><div class="item" id="'+e.data[a].id+'"><a href="http://dev.synchronizehub.com/profile/'+e.data[a].id+'" class="image"><div class="inner"><div class="item-specific">'+drawItemSpecific(t,e,a)+'</div><img src="'+e.data[a].gallery[0]+'" alt=""></div></a><div class="wrapper"><a href="http://dev.synchronizehub.com/profile/'+e.data[a].id+'" id="'+e.data[a].id+'"><h3 class="ResultsName"><i class="'+e.data[a].MapIcon+' Titleicon"></i>'+e.data[a].title+'</h3></a><figure class="UniversityNameTitle">'+e.data[a].university+"</figure><figure>"+e.data[a].location+'</figure><div class="info"><div class="type"><span class="TypeName">'+e.data[a].type+'</span><i class="'+e.data[a].type_icon+' TypeIcon"> </i></div></div></div></div></li>')}function centerMapToMarker(){$.each(json.data,function(e){if(json.data[e].id==id){var a=json.data[e].latitude,t=json.data[e].longitude,o=new google.maps.LatLng(a,t);map.setCenter(o)}})}function animateOSMMarkers(e,a,t){var o=e.getBounds(),n=[];$.each(a,function(e){if(o.contains(a[e].getLatLng())){var i=t.data[e].category;pushItemsToArray(t,e,i,n),setTimeout(function(){null!=a[e]._icon&&(a[e]._icon.className="leaflet-marker-icon leaflet-zoom-animated leaflet-clickable marker-loaded")},50*e)}else null!=a[e]._icon&&(a[e]._icon.className="leaflet-marker-icon leaflet-zoom-animated leaflet-clickable")}),$(".items-list .results").html(n),rating(".results .item"),$(".results .item").hover(function(){a[$(this).attr("id")-1]._icon&&(a[$(this).attr("id")-1]._icon.className="leaflet-marker-icon leaflet-zoom-animated leaflet-clickable marker-loaded marker-active")},function(){a[$(this).attr("id")-1]._icon&&(a[$(this).attr("id")-1]._icon.className="leaflet-marker-icon leaflet-zoom-animated leaflet-clickable marker-loaded")})}function redrawMap(e,a){$(".map .toggle-navigation").click(function(){$(".map-canvas").toggleClass("results-collapsed"),$(".map-canvas .map").one("transitionend webkitTransitionEnd oTransitionEnd MSTransitionEnd",function(){"osm"==e?a.invalidateSize():"google"==e&&google.maps.event.trigger(a,"resize")})})}var $=jQuery.noConflict(),mapStyles=[{featureType:"road",elementType:"labels",stylers:[{visibility:"simplified"},{lightness:20}]},{featureType:"administrative.land_parcel",elementType:"all",stylers:[{visibility:"off"}]},{featureType:"landscape.man_made",elementType:"all",stylers:[{visibility:"on"}]},{featureType:"transit",elementType:"all",stylers:[{saturation:-100},{visibility:"on"},{lightness:10}]},{featureType:"road.local",elementType:"all",stylers:[{visibility:"on"}]},{featureType:"road.local",elementType:"all",stylers:[{visibility:"on"}]},{featureType:"road.highway",elementType:"labels",stylers:[{visibility:"simplified"}]},{featureType:"poi",elementType:"labels",stylers:[{visibility:"off"}]},{featureType:"road.arterial",elementType:"labels",stylers:[{visibility:"on"},{lightness:50}]},{featureType:"water",elementType:"all",stylers:[{hue:"#a1cdfc"},{saturation:30},{lightness:49}]},{featureType:"road.highway",elementType:"geometry",stylers:[{hue:"#f49935"}]},{featureType:"road.arterial",elementType:"geometry",stylers:[{hue:"#fad959"}]},{featureType:"road.highway",elementType:"all",stylers:[{hue:"#dddbd7"},{saturation:-92},{lightness:60},{visibility:"on"}]},{featureType:"landscape.natural",elementType:"all",stylers:[{hue:"#c8c6c3"},{saturation:-71},{lightness:-18},{visibility:"on"}]},{featureType:"poi",elementType:"all",stylers:[{hue:"#d9d5cd"},{saturation:-70},{lightness:20},{visibility:"on"}]}],$body=$("body");$body.hasClass("map-fullscreen")&&($(window).width()>768?$(".map-canvas").height($(window).height()-$(".header").height()):$(".map-canvas #map").height($(window).height()-$(".header").height()));